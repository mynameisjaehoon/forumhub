---
title: 메뉴얼
date: 2024-04-29 03:00:00 +09:00
description: >-
    기억말고 기록을 믿자
categories: [메뉴얼]
---

## SSH
### SSH 키 만들기
```
ssh-keygen -t rsa -f {키 파일 생성 위치(파일 이름 포함)} -C {사용자 이름,이메일}
```

## Nginx
- 명령어 끝에는 꼭 세미콜론(`;`) 붙입시다.

### 로드밸런서
- 로드밸런서 upstream 서버목록 작성할 때는 사용되는 포트번호도 함께 적어주어야합니다. 로드밸런서에서 8080 포트의 서버로 트래픽을 보낸다고 가정해보면
    ```
    # X
    upstream gongnomok-dev-cluster {
        server 111.111.111.111; 
        server 222.222.222.222; 
    }

    # O
    upstream gongnomok-dev-cluster {
        server 111.111.111.111:8080;
        server 222.222.222.222:8080;
    }
    ```

## GCP
### VM
- 외부 IP주소를 임시 > 고정으로 변경 필요. 미설정 시 인스턴스가 재부팅 될때마다 IP가 바뀐다.
- 방화벽 설정으로 인바운드 포트 설정 필요.
    - `VPC >> 방화벽 >> 방화벽 규칙 만들기`
    - 방화벽 대상 설정 주의
        - 네트워크의 모든 인스턴스는 말그대로 사용하는 서비스 모두에 적용되는 방화벽 규칙이 된다.
        - 지정된 대상 태그 옵션을 선택하면 인스턴스에 태그가 설정될때만 적용된다.

### SQL
- root 이외의 사용자 설정이 필요하다면 SQL >> 사용자 메뉴에서 새로운 사용자를 추가할 수 있다.

## 사이트 접속이 안돼요
- 서버의 인바운드 포트 정책 확인
- 프론트측에서 요청 URI가 올바른지 확인
- 도커 노출 포트 확인
    - `호스트 포트 : 컨테이너 포트` 둘다 확인하자.

## Docker

### Dockerfile
#### 특정 파일을 디렉토리에 복사

#### 특정 디렉토리를 디렉토리에 복사
go라는 디렉토리가 있다고 하자.<br>
다음 명령은 go 디렉토리에 들어있는 모든 컨텐츠를 복사해서 /usr/local/ 디렉토리 내부에 넣는다.<br>
go 디렉토리까지 복사해서 /usr/local/go/ 내부에 컨텐츠가 들어가는 것이라고 착각하지 말자.
```dockerfile
ADD go /usr/local/
```

go 디렉토리도 함께 복사해주고 싶다면 다음과 같이 이름을 명시해주면 된다.
```dockerfile
ADD go /usr/local/go
COPY go /usr/local/go
```

### 환경설정
- [우분투 도커 설치 문서](https://docs.docker.com/engine/install/ubuntu/)
